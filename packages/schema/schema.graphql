interface Actor {
  id: ID!
  name: String!
  subjects: [Subject!]
}

type Account implements Actor {
  id: ID!
  name: String!
  subjects: [Subject!]
}

type Organization implements Actor {
  id: ID!
  name: String!
  subjects: [Subject!]
}

type Credential implements Actor {
  id: ID!
  email: String!
  name: String!
  subjects: [Subject!]
}

enum ReportLevel {
  PASSED
  FAILED
  INAPPLICABLE
}

type Report {
  id: ID!
  level: ReportLevel!
  name: String!
  message: String
  html: String
  xpath: String
  css: String
}

type Subject {
  id: ID!
  name: String!
  description: String!
  domain: String!
  diagnoses: [Diagnosis!]
}

type Score {
  error: Int!
  warn: Int!
  ok: Int!
}

enum DiagnosisStatus {
  STARTED
  RUNNING
  DONE
  FAILED
}

type Diagnosis {
  id: ID!
  score: Score!
  screenshot: String!
  status: DiagnosisStatus!
  reports: [Report!]!
  subject: Subject!
  doneRulesCount: Int!
  totalRulesCount: Int!
}

type Query {
  diagnosis(id: ID!): Diagnosis!
  account(id: ID!): Account!
  organization(id: ID!): Organization!
  credential: Credential!
}

type Mutation {
  createDiagnosis(url: String!): Diagnosis!
  deleteDiagnosis(id: ID!): ID!
}

type Subscription {
  diagnosis(id: ID!): Diagnosis!
}

schema {
  query: Query
  mutation: Mutation
}
